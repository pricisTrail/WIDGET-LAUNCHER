:root {
  font-family: "IBM Plex Sans", "Segoe UI Variable Text", "Segoe UI", sans-serif;
  background: transparent;
  color: #e9f2ff;

  --display-time: #f3f8ff;
  --display-percent: #ffd76f;
  --display-shadow: rgba(7, 12, 20, 0.88);
  --widget-surface-start: rgba(21, 33, 59, 0.78);
  --widget-surface-end: rgba(12, 19, 33, 0.72);
  --widget-border: rgba(129, 157, 214, 0.48);
  --widget-glow: rgba(101, 179, 255, 0.32);

  --settings-surface: rgba(17, 24, 41, 0.95);
  --settings-surface-strong: rgba(23, 33, 58, 0.98);
  --settings-card: rgba(34, 45, 78, 0.92);
  --settings-border: rgba(130, 157, 214, 0.45);
  --settings-muted: #9fb5d9;
  --settings-accent: #65b3ff;
  --settings-text: #e8f1ff;
}

:root[data-theme="midnight"] {
  --display-time: #f3f8ff;
  --display-percent: #ffd76f;
  --widget-surface-start: rgba(21, 33, 59, 0.78);
  --widget-surface-end: rgba(12, 19, 33, 0.72);
  --widget-border: rgba(129, 157, 214, 0.48);
  --widget-glow: rgba(101, 179, 255, 0.32);
  --settings-surface: rgba(17, 24, 41, 0.95);
  --settings-surface-strong: rgba(23, 33, 58, 0.98);
  --settings-card: rgba(34, 45, 78, 0.92);
  --settings-border: rgba(130, 157, 214, 0.45);
  --settings-muted: #9fb5d9;
  --settings-accent: #65b3ff;
  --settings-text: #e8f1ff;
}

:root[data-theme="dark-purple"] {
  --display-time: #f5efff;
  --display-percent: #ffbe8a;
  --widget-surface-start: rgba(48, 26, 68, 0.78);
  --widget-surface-end: rgba(28, 15, 41, 0.72);
  --widget-border: rgba(194, 145, 255, 0.44);
  --widget-glow: rgba(209, 156, 255, 0.3);
  --settings-surface: rgba(31, 18, 45, 0.95);
  --settings-surface-strong: rgba(40, 23, 58, 0.98);
  --settings-card: rgba(58, 35, 85, 0.92);
  --settings-border: rgba(194, 145, 255, 0.4);
  --settings-muted: #cdb7e6;
  --settings-accent: #d19cff;
  --settings-text: #f3ebff;
}

:root[data-theme="forest"] {
  --display-time: #ecfff4;
  --display-percent: #d8ff85;
  --widget-surface-start: rgba(25, 52, 41, 0.78);
  --widget-surface-end: rgba(14, 30, 24, 0.72);
  --widget-border: rgba(131, 210, 160, 0.46);
  --widget-glow: rgba(127, 224, 166, 0.3);
  --settings-surface: rgba(18, 36, 29, 0.95);
  --settings-surface-strong: rgba(26, 48, 39, 0.98);
  --settings-card: rgba(35, 63, 52, 0.92);
  --settings-border: rgba(131, 210, 160, 0.42);
  --settings-muted: #afd8c0;
  --settings-accent: #7fe0a6;
  --settings-text: #ebfff4;
}

:root[data-theme="rose"] {
  --display-time: #fff1f4;
  --display-percent: #ffd5a8;
  --widget-surface-start: rgba(66, 33, 46, 0.78);
  --widget-surface-end: rgba(36, 20, 26, 0.72);
  --widget-border: rgba(239, 151, 177, 0.45);
  --widget-glow: rgba(255, 169, 194, 0.31);
  --settings-surface: rgba(48, 25, 34, 0.95);
  --settings-surface-strong: rgba(60, 31, 42, 0.98);
  --settings-card: rgba(83, 44, 57, 0.92);
  --settings-border: rgba(239, 151, 177, 0.42);
  --settings-muted: #e2b2c1;
  --settings-accent: #ffa9c2;
  --settings-text: #fff0f5;
}

:root[data-theme="amber"] {
  --display-time: #fff7ea;
  --display-percent: #ffd059;
  --widget-surface-start: rgba(66, 44, 22, 0.78);
  --widget-surface-end: rgba(35, 24, 12, 0.72);
  --widget-border: rgba(236, 182, 112, 0.46);
  --widget-glow: rgba(255, 194, 111, 0.3);
  --settings-surface: rgba(47, 31, 16, 0.95);
  --settings-surface-strong: rgba(60, 40, 21, 0.98);
  --settings-card: rgba(84, 56, 29, 0.92);
  --settings-border: rgba(236, 182, 112, 0.43);
  --settings-muted: #e4c49a;
  --settings-accent: #ffc26f;
  --settings-text: #fff8ec;
}

:root[data-theme="slate"] {
  --display-time: #edf4fb;
  --display-percent: #9ed8ff;
  --widget-surface-start: rgba(36, 47, 60, 0.78);
  --widget-surface-end: rgba(21, 28, 36, 0.72);
  --widget-border: rgba(139, 170, 197, 0.46);
  --widget-glow: rgba(140, 204, 251, 0.31);
  --settings-surface: rgba(28, 35, 44, 0.95);
  --settings-surface-strong: rgba(36, 45, 55, 0.98);
  --settings-card: rgba(51, 62, 76, 0.92);
  --settings-border: rgba(139, 170, 197, 0.4);
  --settings-muted: #b2c6d8;
  --settings-accent: #8cccfb;
  --settings-text: #eef6ff;
}

* {
  box-sizing: border-box;
}

html,
body {
  width: 100%;
  height: 100%;
  margin: 0;
  background: transparent;
}

body {
  overflow: hidden;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.widget {
  position: relative;
  width: 100%;
  height: 100%;
  padding: 3px 6px;
  display: grid;
  grid-template-rows: auto auto;
  align-content: end;
  gap: 2px;
  user-select: none;
  animation: widget-in 170ms ease-out;
}

.widget.settings-window-mode {
  padding: 10px;
  align-content: stretch;
  grid-template-rows: 1fr auto;
  gap: 8px;
}

.display {
  display: flex;
  align-items: baseline;
  justify-content: flex-end;
  gap: 8px;
  padding: 4px 8px;
  border-radius: 10px;
  border: 1px solid var(--widget-border);
  background: linear-gradient(145deg, var(--widget-surface-start), var(--widget-surface-end));
  backdrop-filter: blur(8px);
  box-shadow: 0 10px 22px -14px var(--widget-glow);
  min-height: 0;
  cursor: move;
}

.display.percent-hidden {
  justify-content: center;
  gap: 0;
  padding-left: 6px;
  padding-right: 6px;
}

.widget.settings-window-mode .display {
  display: none;
}

.widget.settings-window-mode .resize-handle {
  display: none;
}

.time {
  margin: 0;
  font-family: "JetBrains Mono", "Cascadia Mono", "Consolas", monospace;
  font-size: clamp(0.88rem, 8.1vw, 1.34rem);
  line-height: 1.05;
  font-weight: 700;
  color: var(--display-time);
  text-shadow: 0 1px 8px var(--display-shadow);
}

.progress-percent {
  font-family: "JetBrains Mono", "Cascadia Mono", "Consolas", monospace;
  font-size: clamp(0.68rem, 5.2vw, 0.9rem);
  font-weight: 700;
  color: var(--display-percent);
  text-shadow: 0 1px 8px var(--display-shadow);
}

.settings-window {
  height: 100%;
  overflow-y: auto;
  border-radius: 12px;
  border: 1px solid var(--settings-border);
  background: linear-gradient(180deg, var(--settings-surface-strong), var(--settings-surface));
  padding: 12px;
  color: var(--settings-text);
}

.settings-window[hidden] {
  display: none;
}

.settings-header {
  margin: 0 0 10px;
}

.settings-header h2 {
  margin: 0;
  font-size: 1.85rem;
  line-height: 1.1;
}

.settings-header p {
  margin: 4px 0 0;
  font-size: 0.78rem;
  color: var(--settings-muted);
}

.settings-form {
  display: grid;
  gap: 10px;
}

.settings-card {
  border-radius: 10px;
  border: 1px solid color-mix(in srgb, var(--settings-border) 82%, transparent);
  background: var(--settings-card);
  padding: 10px;
  display: grid;
  gap: 8px;
}

.settings-card h3 {
  margin: 0;
  font-size: 1.35rem;
  line-height: 1.1;
}

.hint {
  margin: 0;
  color: var(--settings-muted);
  font-size: 0.75rem;
}

.row {
  display: grid;
  grid-template-columns: 120px 1fr;
  align-items: center;
  gap: 8px;
  font-size: 0.84rem;
}

.check-row {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.86rem;
}

.radio-group {
  display: flex;
  flex-wrap: wrap;
  gap: 14px;
  font-size: 0.86rem;
}

.schedule-grid {
  display: grid;
  grid-template-columns: 84px 1fr 1fr;
  align-items: center;
  gap: 8px;
  font-size: 0.82rem;
}

.overrides {
  display: grid;
  gap: 6px;
}

.override-row {
  display: grid;
  grid-template-columns: 46px 1fr 1fr;
  align-items: center;
  gap: 8px;
}

.override-row label {
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 0.82rem;
}

.settings-window input,
.settings-window select,
.settings-window button {
  border: 1px solid color-mix(in srgb, var(--settings-border) 78%, transparent);
  border-radius: 7px;
  background: color-mix(in srgb, var(--settings-surface) 80%, #111 20%);
  color: var(--settings-text);
  padding: 5px 7px;
  font: inherit;
  font-size: 0.82rem;
}

.settings-window input:focus,
.settings-window select:focus,
.settings-window button:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--settings-accent) 72%, white 28%);
  outline-offset: 1px;
}

.actions {
  position: sticky;
  bottom: 0;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 6px;
  padding-top: 2px;
}

.actions button {
  cursor: pointer;
  transition: border-color 120ms ease, background-color 120ms ease;
}

.actions button:hover {
  border-color: var(--settings-accent);
}

.actions .secondary:hover {
  background: color-mix(in srgb, var(--settings-accent) 18%, transparent);
}

.settings-window .danger {
  border-color: color-mix(in srgb, #f87171 70%, var(--settings-border));
}

.settings-window .danger:hover {
  border-color: #f87171;
  background: color-mix(in srgb, #f87171 20%, transparent);
}

.progress-window {
  margin: 0;
  font-size: 0.77rem;
  color: var(--settings-muted);
}

.status {
  margin: 0;
  min-height: 1em;
  text-align: right;
  font-size: 0.64rem;
  color: color-mix(in srgb, var(--settings-text) 82%, transparent);
  text-shadow: 0 1px 6px var(--display-shadow);
}

.status:empty {
  display: none;
}

.widget.settings-window-mode .status {
  text-align: left;
  color: var(--settings-muted);
  text-shadow: none;
}

.resize-handle {
  position: absolute;
  z-index: 30;
}

.resize-handle.n,
.resize-handle.s {
  left: 10px;
  right: 10px;
  height: 16px;
}

.resize-handle.n {
  top: -8px;
  cursor: ns-resize;
}

.resize-handle.s {
  bottom: -8px;
  cursor: ns-resize;
}

.resize-handle.e,
.resize-handle.w {
  top: 10px;
  bottom: 10px;
  width: 16px;
}

.resize-handle.e {
  right: -8px;
  cursor: ew-resize;
}

.resize-handle.w {
  left: -8px;
  cursor: ew-resize;
}

.resize-handle.ne,
.resize-handle.nw,
.resize-handle.se,
.resize-handle.sw {
  width: 22px;
  height: 22px;
}

.resize-handle.ne {
  top: -10px;
  right: -10px;
  cursor: nesw-resize;
}

.resize-handle.nw {
  top: -10px;
  left: -10px;
  cursor: nwse-resize;
}

.resize-handle.se {
  bottom: -10px;
  right: -10px;
  cursor: nwse-resize;
}

.resize-handle.sw {
  bottom: -10px;
  left: -10px;
  cursor: nesw-resize;
}

@keyframes widget-in {
  from {
    opacity: 0;
    transform: translateY(3px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (max-width: 260px) {
  .settings-header h2 {
    font-size: 1.35rem;
  }

  .row,
  .schedule-grid,
  .override-row {
    grid-template-columns: 1fr;
  }

  .actions {
    grid-template-columns: 1fr;
  }
}
